<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Привет от Клавы</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root {
      color-scheme: dark;
    }
    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      font-family: 'Montserrat', sans-serif;
      background: radial-gradient(circle at top, #0c1f3f, #050a16 70%);
      color: #e5ecff;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      gap: 32px;
      align-items: center;
      justify-content: center;
      padding: 40px 20px 80px;
    }
    .card,
    .game-card {
      width: min(900px, 100%);
      text-align: center;
      border: 1px solid rgba(255,255,255,0.15);
      border-radius: 24px;
      padding: 40px 60px;
      background: rgba(5, 10, 22, 0.72);
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.55);
    }
    .card h1 {
      font-size: clamp(32px, 5vw, 44px);
      margin-bottom: 10px;
      letter-spacing: 1px;
    }
    .card p {
      font-size: 18px;
      line-height: 1.6;
      margin: 0;
    }
    .accent {
      color: #50e3c2;
      font-weight: 600;
    }
    .game-card {
      text-align: left;
    }
    .game-header {
      display: flex;
      flex-wrap: wrap;
      align-items: baseline;
      gap: 10px 20px;
      margin-bottom: 20px;
      justify-content: space-between;
    }
    .game-header h2 {
      margin: 0;
      font-size: 26px;
    }
    .scoreboard {
      font-size: 16px;
      display: flex;
      gap: 16px;
      font-family: 'Montserrat', monospace;
    }
    canvas {
      width: 100%;
      background: linear-gradient(#0c0f1e, #070911);
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,0.1);
      display: block;
    }
    .instructions {
      margin-top: 16px;
      font-size: 14px;
      opacity: 0.75;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }
    .jump-button {
      margin-left: auto;
      padding: 10px 18px;
      border-radius: 30px;
      border: 1px solid rgba(255,255,255,0.3);
      background: transparent;
      color: inherit;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.2s ease;
    }
    .jump-button:hover,
    .jump-button:focus-visible {
      background: rgba(80, 227, 194, 0.15);
      outline: none;
    }
    @media (max-width: 640px) {
      .card,
      .game-card {
        padding: 30px;
      }
      .instructions {
        flex-direction: column;
        margin-top: 20px;
      }
      .jump-button {
        width: 100%;
        margin-left: 0;
      }
    }
  </style>
</head>
<body>
  <div class="card">
    <h1>⚙️ Клава на связи</h1>
    <p>Это привет из сетей ps.kz — всё под контролем, даже <span class="accent">хуй</span>.
    <br />Добро пожаловать в инфраструктуру, где порядок на первом месте.</p>
  </div>

  <div class="game-card">
    <div class="game-header">
      <h2>Chrome Dino тренировка</h2>
      <div class="scoreboard">
        <span>Score: <strong id="score">0000</strong></span>
        <span>Best: <strong id="best">0000</strong></span>
      </div>
    </div>
    <canvas id="dinoCanvas" width="900" height="220" aria-label="Мини-игра Дино"></canvas>
    <div class="instructions">
      <span>Жми <strong>Space / ↑</strong> или кнопку ниже, чтобы прыгать. После столкновения нажми ещё раз для рестарта.</span>
      <button class="jump-button" id="jumpBtn">Прыг!</button>
    </div>
  </div>

  <script>
    (() => {
      const canvas = document.getElementById('dinoCanvas');
      const ctx = canvas.getContext('2d');
      const groundY = canvas.height - 45;
      const dino = { x: 80, y: groundY - 48, width: 48, height: 48, vy: 0 };
      const gravity = 0.9;
      const jumpForce = 16;
      let obstacles = [];
      let speed = 7;
      let score = 0;
      let best = 0;
      let frame = 0;
      let gameOver = false;
      const scoreEl = document.getElementById('score');
      const bestEl = document.getElementById('best');

      const formatScore = (value) => value.toString().padStart(4, '0');

      function spawnObstacle() {
        const height = 30 + Math.random() * 30;
        const width = 20 + Math.random() * 30;
        obstacles.push({
          x: canvas.width + 20,
          y: groundY - height,
          width,
          height
        });
      }

      function resetGame() {
          obstacles = [];
          score = 0;
          frame = 0;
          speed = 7;
          dino.y = groundY - dino.height;
          dino.vy = 0;
          gameOver = false;
          scoreEl.textContent = formatScore(score);
      }

      function jump() {
        if (gameOver) {
          resetGame();
          return;
        }
        if (dino.y >= groundY - dino.height - 1) {
          dino.vy = -jumpForce;
        }
      }

      function updateScore() {
        score += 1;
        if (score > best) {
          best = score;
          bestEl.textContent = formatScore(best);
        }
        scoreEl.textContent = formatScore(score);
      }

      function drawDino() {
        ctx.fillStyle = '#50e3c2';
        ctx.fillRect(dino.x, dino.y, dino.width, dino.height);
        ctx.fillStyle = '#0c1f3f';
        ctx.fillRect(dino.x + dino.width - 12, dino.y + 10, 8, 8);
      }

      function drawGround() {
        ctx.strokeStyle = 'rgba(255,255,255,0.3)';
        ctx.beginPath();
        ctx.moveTo(0, groundY + 40);
        ctx.lineTo(canvas.width, groundY + 40);
        ctx.stroke();
      }

      function drawObstacles() {
        ctx.fillStyle = '#e5ecff';
        obstacles.forEach(obs => {
          ctx.fillRect(obs.x, obs.y, obs.width, obs.height);
        });
      }

      function detectCollision(obs) {
        return (
          dino.x < obs.x + obs.width &&
          dino.x + dino.width > obs.x &&
          dino.y < obs.y + obs.height &&
          dino.y + dino.height > obs.y
        );
      }

      function gameLoop() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        drawGround();

        if (!gameOver) {
          frame++;
          if (frame % 70 === 0) {
            spawnObstacle();
            if (speed < 12) speed += 0.2;
          }
          obstacles.forEach(obs => {
            obs.x -= speed;
          });
          obstacles = obstacles.filter(obs => obs.x + obs.width > 0);

          dino.vy += gravity;
          dino.y += dino.vy;
          if (dino.y > groundY - dino.height) {
            dino.y = groundY - dino.height;
            dino.vy = 0;
          }

          obstacles.forEach(obs => {
            if (detectCollision(obs)) {
              gameOver = true;
            }
          });

          updateScore();
        } else {
          ctx.fillStyle = 'rgba(255,255,255,0.8)';
          ctx.font = '24px Montserrat';
          ctx.fillText('CRASH! Нажми пробел или кнопку, чтобы перезапустить.', 60, 80);
        }

        drawObstacles();
        drawDino();
        requestAnimationFrame(gameLoop);
      }

      document.addEventListener('keydown', (event) => {
        if (event.code === 'Space' || event.code === 'ArrowUp') {
          event.preventDefault();
          jump();
        }
      });

      document.getElementById('jumpBtn').addEventListener('click', jump);
      canvas.addEventListener('click', jump);

      bestEl.textContent = formatScore(best);
      scoreEl.textContent = formatScore(score);
      requestAnimationFrame(gameLoop);
    })();
  </script>
</body>
</html>
